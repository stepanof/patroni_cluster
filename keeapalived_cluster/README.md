Папка с файлами для запуска keepalived на нескольких нодах.

node01 выступает в качестве мастера, node02 в качестве BACKUP инстанса keepalived. В связи с этим различаются конфиги для каждой ноды.

Для запуска keepalived перейдите в папку, соответствующую ноде, на который будет подниматься приложение и выполните:

`cd ~/patroni_cluster/keeapalived_cluster/node0X`

`docker-compose up -d`

keepalived поднимает VIP - виртуальный IP, соответствующий $VIP_IP.

Этот VIP используют HAProxy на node01 и node02 в качестве точки входа в кластер.

В штатном режиме работы (работают оба keepalived и haproxy на node01 и node02) VIP будет поднят на MASTER-сервере.

При падении MASTER-сервера (node01), BACKUP-сервер (node02) поднимет VIP у себя.

При падении HAProxy на node01 VIP также будет перемещен на node02, чтобы VIP использовался уже HAProxy на node02.

Таким образом, работа кластера остановлена не будет ни при падении одного из сервисов (HAProxy, keepalived), ни при падении одной из нод (node01,node02)

В качестве healthckeck(docker) в контейнере выполняется проверка доступности нашего DNS сервера по 53 порту.
