# patroni_cluster

Вспомогательные файлы для кластера postgres под управлением patroni.

В каждой папке находятся файлы, относящиеся к одному из вспомогательных сервисов (etcd, keepalived, haproxy, patroni).

В каждой папке есть отдельный README файл с инструкциями по запуску и поддержке отдельных компонентов кластера.

Для разворачивания кластера необходимо развернуть поочередно:
1) etcd
2) patroni
3) keepalived
4) haproxy

etcd - DCS система, хранит данные в виде ключ:значение. Используется для хранения обмена данными, к примеру, кто сейчас мастер и тд.

patroni - надстройка над postgres, которая позволяет управлять кластером из нескольких баз postgres из командной строки.

keepalived - приложение для поднятия VIP - Virtual IP.

haproxy - балансировщик и прокси для соединений.

etcd запущен на 3-х нодах, остальные сервисы работаю на 2-х нодах.

TODO добавить файлы для настройки мониторинга в Grafana

TODO добавить управление $NODE01_IP, $NODE02_IP, $NODE03_IP через `.env` файл
